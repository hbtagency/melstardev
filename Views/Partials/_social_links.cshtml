@inherits Umbraco.Web.Mvc.UmbracoTemplatePage

<script type="text/javascript" src="/js/jquery/jquery.qrcode.min.js"></script>

<div class="post_social_links">
    <!--
    <div class="fb-like" data-href="@umbraco.library.NiceUrl(CurrentPage.Id)" data-layout="button" data-show-faces="true" data-share="true"></div>
    -->
    
    <a id="facebook" href="javascript:fbShare('@umbraco.library.NiceUrl(CurrentPage.Id)', 'Fb Share', 'Facebook share popup', '@umbraco.library.NiceUrl(CurrentPage.Id)', 520, 350)"><img class="img-responsive" src="/img/facebook.png" /></a>
        <a id="wechat" href="#"><img class="img-responsive" src="/img/wechat.png"/></a>
</div>

<div id="qrcode_popup" class="clearfix" style="width:300px;height:300px;position:absolute;left:0;right:0;margin:auto;"></div>

<script>
    //Wechat
    $("#wechat").click(function () {
        if ($('#qrcode_popup').hasClass("open")) {
            $('#qrcode_popup').html("");
            $('#qrcode_popup').removeClass("open");
            $('#qrcode_popup').fadeOut();
        } else {
            $('#qrcode_popup').qrcode("@umbraco.library.NiceUrl(CurrentPage.Id)");
            $('#qrcode_popup').fadeIn();
            $('#qrcode_popup').addClass("open");
        }
    });

    $("#qrcode_popup").click(function () {
        $('#qrcode_popup').fadeOut();
        $('#qrcode_popup').html("");
    });

    //Facebook
    function fbShare(url, title, descr, image, winWidth, winHeight) {
        var winTop = (screen.height / 2) - (winHeight / 2);
        var winLeft = (screen.width / 2) - (winWidth / 2);
        window.open('http://www.facebook.com/sharer.php?s=100&p[title]=' + title + '&p[summary]=' + descr + '&p[url]=' + url + '&p[images][0]=' + image, 'sharer', 'top=' + winTop + ',left=' + winLeft + ',toolbar=0,status=0,width=' + winWidth + ',height=' + winHeight);
    }
</script>