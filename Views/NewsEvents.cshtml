@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Layout.cshtml";
    var newsEvent = Umbraco.Content(1067);
}   

@Html.Partial("_header")

    <script type="text/javascript" src="/js/project/angular/postAngularController.js"></script>

    <div id="mainApp" class="container template_content">
        <div ng-controller="postController">
        <div class="row">
            <div class="col-lg-1 visible-lg">
            </div>
            <div class="col-xs-12 col-lg-10">
                <nav class="centered_nav_area clearfix">
                    <ul class="centered_list_nav">
                        <li class="first"><a href="/en/newsevents" ng-click="selectCat('')">All</a></li>
                        @{
                            foreach (var c in newsEvent.Children())
                            {
                                <li><a href="#" ng-click="selectCat(@c.Id)">@c.pageTitle</a></li>
                            }
                        }
                    </ul>
                </nav>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-1 visible-lg">
            </div>
            <div class="col-xs-12 col-lg-10 three-column-container">
                <img id="preloader" src="/img/preloader.gif"/>
                <div class="row">
                    <div ng-repeat="obj in posts | filter: {categoryID:search.categoryID}" ng-repeat-end-watch="myFunction">
                        <div class="post_list_item col-lg-4 col-sm-6 col-xs-12">
                            <a class="in-row" href="{{obj.url}}"><img ng-src="{{obj.featuredImage}}" class="img-responsive" /></a>
                            <a class="in-row" href="{{obj.url}}"><h2>{{obj.title}}</h2></a>
                            <a class="in-row whats_on_newsevents" href="/en/newsevents/#/{{obj.categoryName}}">{{obj.categoryName}}</a>
                            <p class="in-row">
                               {{obj.subtitle}}
                            </p>
                        </div>
                    </div>
                </div> 
            </div>
        </div>
        </div>
    </div>


    <script type="text/javascript" src="/js/project/banner_mask_height_init.js"></script>

@helper childPages(dynamic pages)
{
    @* Ensure that we have a collection of pages *@
    if (pages.Any())
    {
        @* Get the first page in pages and get the level *@
        var naviLevel = pages.First().Level;

        @* Add in level for a CSS hook *@
        <ul class="dropdown-menu level-2">
            @foreach (var page in pages)
            {
                <li>
                    <a href="@page.Url">@page.Name</a>

                    @* if the current page has any children *@
                    @if (page.Children.Any())
                    {
                        @* Call our helper to display the children *@
                        @childPages(page.Children)
                    }
                </li>
            }
        </ul>
    }
}

<script type="text/javascript" src="/js/project/news_events_loading_in_order.js"></script>
<script type="text/javascript" src="/js/project/dynamic_content_height_for_postList.js"></script>

